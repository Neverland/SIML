/** SIML (c) 2013 James padolsey, http://github.com/padolsey/SIML **/
(function(){var l="undefined"!=typeof module&&module.exports?module.exports:window.siml={};(function(){"use strict";function n(l){return"[object Array]"==={}.toString.call(l)}function t(l){return(l+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")}function u(l){return(l+"").replace(/^\s\s*|\s\s*$/g,"")}function e(l){for(var t=[],u=0,r=l.length;r>u;++u)t[u]=n(l[u])?e(l[u]):l[u];return t}function r(l,n){for(var t in l)n.hasOwnProperty(t)||(n[t]=l[t]);return n}function s(l,n){return function(t,u,e,r){this.parentElement=e,this.indentation=r,t=[].slice.call(t);var s=t[0],o=u[l][s]||n[s];if(o||(o=u[l]._default||n._default),!o)throw Error("No fallback for"+t.join(""));this.type=o.type,this.html=o.make.apply(this,t)}}function o(l,n,t,u){this.spec=l,this.config=n||{},this.parentElement=t||this,this.indentation=u||"",this.defaultIndentation=n.indent,this.tag=null,this.id=null,this.attrs=[],this.classes=[],this.pseudos=[],this.isSingular=!1,this.multiplier=1,this.isPretty=n.pretty,this.htmlOutput=[],this.htmlContent=[],this.htmlAttributes=[],this.selector=l[0],this.make(),this.processChildren(l[1]),this.collectOutput(),this.html=this.htmlOutput.join("")}function f(){o.apply(this,arguments)}function i(l){this.config=r(this.defaultConfig,l)}var c=[].push,a="div",h="  ",p={input:1,img:1,meta:1,link:1,br:1,hr:1,source:1,area:1,base:1,col:1},m={_fillText:{type:"CONTENT",make:function(l,n){return t(n)}},_default:{type:"CONTENT",make:function(l){throw Error("Directive not resolvable: "+l)}}},A={_default:{type:"ATTR",make:function(l,n){return null==n?l:l+'="'+t(n)+'"'}},text:{type:"CONTENT",make:function(l,n){return t(n)}}},d={_default:{type:"ATTR",make:function(l){return"input"===this.parentElement.tag?'type="'+l+'"':(console.warn("Unknown pseudo class used:",l),void 0)}}},g=Object.create||function(l){function n(){}return n.prototype=l,new n};o.prototype={make:function(){for(var l,n,t=this.selector,u=0,e=t.length;e>u;++u)switch(l=t[u][0],n=t[u][1],l){case"Tag":this.tag=n;break;case"Id":this.id=n;break;case"Attr":this.attrs.push(n);break;case"Class":this.classes.push(n);break;case"Pseudo":this.pseudos.push(n)}this.tag=this.config.toTag.call(this,this.tag||a),this.isSingular=this.tag in p,this.id&&this.htmlAttributes.push('id="'+this.id+'"'),this.classes.length&&this.htmlAttributes.push('class="'+this.classes.join(" ").replace(/(^| )\./g,"$1")+'"');for(var u=0,e=this.attrs.length;e>u;++u)this.processProperty("Attribute",this.attrs[u]);for(var u=0,e=this.pseudos.length;e>u;++u){var r=this.pseudos[u];isNaN(r[0])?this.processProperty("Pseudo",r):this.multiplier=r[0]}},collectOutput:function(){var l=this.indentation,n=this.isPretty,t=this.htmlOutput,u=this.htmlAttributes,e=this.htmlContent;if(t.push(l+"<"+this.tag),t.push(u.length?" "+u.join(" "):""),this.isSingular)return t.push("/>"),void 0;if(t.push(">"),e.length&&(n&&t.push("\n"),t.push(e.join(n?"\n":"")),n&&t.push("\n"+l)),t.push("</"+this.tag+">"),this.multiplier>1)for(var r=t.join(""),s=this.multiplier-1;s--;)t.push(n?"\n":""),t.push(r)},_makeExclusiveBranches:function(l,n,t){function u(l,n,t){var s=l[0],o=r(l),f=n[0],i=n[1],a=n[2],t=t||{child:!1,selector:!1};if(t.child&&t.selector)return t;if(o)for(var h=o.length;h-->0;){var p=o[h];if("ExcGroup"===p[0]&&p[2][0]&&(p=p[2][0]),"sibling"===a){var m=r(p);if(!m||!m.length){if(o[h]=["IncGroup",[p,e(f)]],t.child=!0,"IncGroup"===s)break;continue}}if(t=u(p,n,{child:!1,selector:!1}),"IncGroup"===s&&t.child)break}return t.selector||"Element"===l[0]&&(i&&c.apply(l[1][0],i),t.selector=!0),t.child||o&&(f&&o.push(e(f)),t.child=!0),t}function r(l){return"Element"===l[0]?l[1][1]:"ExcGroup"===l[0]||"IncGroup"===l[0]?l[1]:null}var s=l[2],o=l[1],f=[];u(l,s);for(var i=0,a=o.length;a>i;++i){n[t]=o[i];var h=e(this.spec);n[t]=l,f.push(h)}return f},processChildren:function(l){var n,t,u=l.length,e=[];for(n=0;u>n;++n)"ExcGroup"===l[n][0]&&c.apply(e,this._makeExclusiveBranches(l[n],l,n));if(e.length){this.collectOutput=function(){};for(var r=[],s=0,i=e.length;i>s;++s){var a=e[s];r.push(new("RootElement"===a[0]?f:o)(a,this.config,this.parentElement,this.indentation).html)}this.htmlOutput.push(r.join(this.isPretty?"\n":""))}else for(n=0;u>n;++n){var t=l[n][0];if("Element"===t)this.processElement(l[n][1]);else if("IncGroup"===t)this.processIncGroup(l[n][1]);else{if("ExcGroup"===t)throw Error("siml: Found ExcGroup in unexpected location");this.processProperty(t,l[n][1])}}},processElement:function(l){this.htmlContent.push(new i.Element(l,this.config,this,this.indentation+this.defaultIndentation).html)},processIncGroup:function(l){this.processChildren(l)},processExcGroup:function(l){for(var n=0,t=l.length;t>n;++n){var u=children[n][0];"Element"===u?this.processElement(children[n][1]):"IncGroup"===u?this.processIncGroup(children[n][1]):this.processProperty(u,children[n][1],"EXC_TOKEN")}},processProperty:function(l,n,t){var u=new i.properties[l](n,this.config,this,this.indentation+this.defaultIndentation);if(u.html)switch(u.type){case"ATTR":this.htmlAttributes.push(t||u.html);break;case"CONTENT":this.htmlContent.push(t||this.indentation+this.defaultIndentation+u.html)}}},f.prototype=g(o.prototype),f.prototype.make=function(){},f.prototype.collectOutput=function(){this.htmlOutput=[this.htmlContent.join(this.isPretty?"\n":"")]},f.prototype.processChildren=function(){return this.defaultIndentation="",o.prototype.processChildren.apply(this,arguments)},i.escapeHTML=t,i.trim=u,i.isArray=n,i.Element=o,i.RootElement=f,i.properties={Attribute:s("attributes",A),Directive:s("directives",m),Pseudo:s("pseudos",d)},i.prototype={defaultConfig:{pretty:!0,curly:!1,indent:h,directives:{},attributes:{},pseudos:{},toTag:function(l){return l}},parse:function(n,t){if(t=r(this.config,t||{}),t.pretty||(t.indent=""),/^[\s\n\r]+$/.test(n))n=[];else{t.curly&&(n+="\n/*siml:curly=true*/");try{n=l.PARSER.parse(n)}catch(u){throw void 0!==u.line&&void 0!==u.column?new SyntaxError("SIML: Line "+u.line+", column "+u.column+": "+u.message):new SyntaxError("SIML: "+u.message)}}return"Element"===n[0]?new i.Element(n[1],t).html:new i.RootElement(["RootElement",[["IncGroup",[n]]]],t).html}},l.Parser=i,l.defaultParser=new i({pretty:!0,indent:h}),l.parse=function(n,t){return l.defaultParser.parse(n,t)}})(),l.PARSER=function(){function l(l){return'"'+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var n={parse:function(n,t){function u(l){var n={};for(var t in l)n[t]=l[t];return n}function e(l,t){for(var u=l.offset+t,e=l.offset;u>e;e++){var r=n.charAt(e);"\n"===r?(l.seenCR||l.line++,l.column=1,l.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(l.line++,l.column=1,l.seenCR=!0):(l.column++,l.seenCR=!1)}l.offset+=t}function r(l){L.offset<q.offset||(L.offset>q.offset&&(q=u(L),U=[]),U.push(l))}function s(){var l,t,s,f,i,c,a,h;if(c=u(L),a=u(L),l=K(),null!==l)if(t=o(),t=null!==t?t:"",null!==t){for(s=[],h=u(L),f=[],/^[\r\n\t ]/.test(n.charAt(L.offset))?(i=n.charAt(L.offset),e(L,1)):(i=null,0===H&&r("[\\r\\n\\t ]"));null!==i;)f.push(i),/^[\r\n\t ]/.test(n.charAt(L.offset))?(i=n.charAt(L.offset),e(L,1)):(i=null,0===H&&r("[\\r\\n\\t ]"));for(null!==f?(i=o(),null!==i?f=[f,i]:(f=null,L=u(h))):(f=null,L=u(h));null!==f;){for(s.push(f),h=u(L),f=[],/^[\r\n\t ]/.test(n.charAt(L.offset))?(i=n.charAt(L.offset),e(L,1)):(i=null,0===H&&r("[\\r\\n\\t ]"));null!==i;)f.push(i),/^[\r\n\t ]/.test(n.charAt(L.offset))?(i=n.charAt(L.offset),e(L,1)):(i=null,0===H&&r("[\\r\\n\\t ]"));null!==f?(i=o(),null!==i?f=[f,i]:(f=null,L=u(h))):(f=null,L=u(h))}null!==s?(f=K(),null!==f?l=[l,t,s,f]:(l=null,L=u(a))):(l=null,L=u(a))}else l=null,L=u(a);else l=null,L=u(a);return null!==l&&(l=function(l,n,t,u,e){if(!u)return["IncGroup",[]];if("Element"===u[0]&&!e.length)return u;u=["IncGroup",[u]];for(var r=0,s=e.length;s>r;++r)u[1].push(e[r][1]);return u}(c.offset,c.line,c.column,l[1],l[2])),null===l&&(L=u(c)),l}function o(){var l,t,s,i,c,a,h,p;return a=u(L),h=u(L),l=f(),null!==l?(p=u(L),t=K(),null!==t?(44===n.charCodeAt(L.offset)?(s=",",e(L,1)):(s=null,0===H&&r('","')),null!==s?(i=K(),null!==i?(c=o(),null!==c?t=[t,s,i,c]:(t=null,L=u(p))):(t=null,L=u(p))):(t=null,L=u(p))):(t=null,L=u(p)),t=null!==t?t:"",null!==t?l=[l,t]:(l=null,L=u(h))):(l=null,L=u(h)),null!==l&&(l=function(l,n,t,u,e){return e[3]?["IncGroup",[u,e[3]],"CommaGroup"]:u}(a.offset,a.line,a.column,l[0],l[1])),null===l&&(L=u(a)),l}function f(){var l,t,o,h,p,A,d,g,v,_,E,C;if(_=u(L),E=u(L),l=a(),null!==l){for(C=u(L),t=[],/^[> \t+]/.test(n.charAt(L.offset))?(o=n.charAt(L.offset),e(L,1)):(o=null,0===H&&r("[> \\t+]"));null!==o;)t.push(o),/^[> \t+]/.test(n.charAt(L.offset))?(o=n.charAt(L.offset),e(L,1)):(o=null,0===H&&r("[> \\t+]"));null!==t?(o=f(),null!==o?t=[t,o]:(t=null,L=u(C))):(t=null,L=u(C)),t=null!==t?t:"",null!==t?(o=K(),null!==o?(h=c(),h=null!==h?h:"",null!==h?l=[l,t,o,h]:(l=null,L=u(E))):(l=null,L=u(E))):(l=null,L=u(E))}else l=null,L=u(E);if(null!==l&&(l=function(l,n,t,u,e,r){var s=e[0]&&e[0].join(""),o=e[1];if(r){var f=r[1][0];o?"Element"===o[0]&&o[1][1].push(f):"Element"===u[0]&&u[1][1].push(f)}if(!e.length)return u;switch(u[0]){case"Element":return s.indexOf(",")>-1||s.indexOf("+")>-1?["IncGroup",[u,o]]:("Element"===u[0]?u[1][1].push(o):("IncGroup"===u[0]||"ExcGroup"===u[0])&&u[1].push(o),u);case"Directive":return["IncGroup",[u,o]];case"Attribute":return["IncGroup",[u,o]]}return console.warn(":::",u,o),"ERROR"}(_.offset,_.line,_.column,l[0],l[1],l[3])),null===l&&(L=u(_)),null===l){if(_=u(L),E=u(L),40===n.charCodeAt(L.offset)?(l="(",e(L,1)):(l=null,0===H&&r('"("')),null!==l)if(t=K(),null!==t)if(o=s(),null!==o){for(h=[],C=u(L),p=K(),null!==p?(47===n.charCodeAt(L.offset)?(A="/",e(L,1)):(A=null,0===H&&r('"/"')),null!==A?(d=K(),null!==d?(g=s(),null!==g?p=[p,A,d,g]:(p=null,L=u(C))):(p=null,L=u(C))):(p=null,L=u(C))):(p=null,L=u(C));null!==p;)h.push(p),C=u(L),p=K(),null!==p?(47===n.charCodeAt(L.offset)?(A="/",e(L,1)):(A=null,0===H&&r('"/"')),null!==A?(d=K(),null!==d?(g=s(),null!==g?p=[p,A,d,g]:(p=null,L=u(C))):(p=null,L=u(C))):(p=null,L=u(C))):(p=null,L=u(C));if(null!==h)if(p=K(),null!==p)if(41===n.charCodeAt(L.offset)?(A=")",e(L,1)):(A=null,0===H&&r('")"')),null!==A){for(d=[],g=m();null!==g;)d.push(g),g=m();null!==d?(g=K(),null!==g?(v=i(),v=null!==v?v:"",null!==v?l=[l,t,o,h,p,A,d,g,v]:(l=null,L=u(E))):(l=null,L=u(E))):(l=null,L=u(E))}else l=null,L=u(E);else l=null,L=u(E);else l=null,L=u(E)}else l=null,L=u(E);else l=null,L=u(E);else l=null,L=u(E);null!==l&&(l=function(l,n,t,u,e,r,s){var o=[],f="";e.unshift([,,,u]),s&&("Declaration"===s[0]?s=s[1][0]:(f=s[1],s=s[0]));for(var i=0,c=e.length;c>i;++i)"CommaGroup"===e[i][3][2]&&(e[i][3][0]="ExcGroup",e[i][3][2]=[]),o.push(e[i][3]);return["ExcGroup",o,[s,r,f.indexOf("+")>-1?"sibling":"descendent"]]}(_.offset,_.line,_.column,l[2],l[3],l[6],l[8])),null===l&&(L=u(_))}return l}function i(){var l,t,s,o;if(l=c(),null===l){for(s=u(L),o=u(L),l=[],/^[> \t+]/.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[> \\t+]"));null!==t;)l.push(t),/^[> \t+]/.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[> \\t+]"));null!==l?(t=f(),null!==t?l=[l,t]:(l=null,L=u(o))):(l=null,L=u(o)),null!==l&&(l=function(l,n,t,u,e){return[e,u]}(s.offset,s.line,s.column,l[0],l[1])),null===l&&(L=u(s))}return l}function c(){var l,t,o,f,i;return f=u(L),i=u(L),123===n.charCodeAt(L.offset)?(l="{",e(L,1)):(l=null,0===H&&r('"{"')),null!==l?(t=s(),t=null!==t?t:"",null!==t?(125===n.charCodeAt(L.offset)?(o="}",e(L,1)):(o=null,0===H&&r('"}"')),null!==o?l=[l,t,o]:(l=null,L=u(i))):(l=null,L=u(i))):(l=null,L=u(i)),null!==l&&(l=function(l,n,t,u){return["Declaration",[u]]}(f.offset,f.line,f.column,l[1])),null===l&&(L=u(f)),l}function a(){var l;return l=C(),null===l&&(l=h(),null===l&&(l=E(),null===l&&(l=b()))),l}function h(){var l,n;return n=u(L),l=p(),null!==l&&(l=function(l,n,t,u){return["Element",[u,[]]]}(n.offset,n.line,n.column,l)),null===l&&(L=u(n)),l}function p(){var l,n,t,e,r;if(e=u(L),r=u(L),l=A(),null!==l){for(n=[],t=m();null!==t;)n.push(t),t=m();null!==n?l=[l,n]:(l=null,L=u(r))}else l=null,L=u(r);if(null!==l&&(l=function(l,n,t,u){return u[1].unshift(u[0]),u[1]}(e.offset,e.line,e.column,l)),null===l&&(L=u(e)),null===l){if(e=u(L),n=m(),null!==n)for(l=[];null!==n;)l.push(n),n=m();else l=null;null!==l&&(l=function(l,n,t,u){return u}(e.offset,e.line,e.column,l)),null===l&&(L=u(e))}return l}function m(){var l;return l=d(),null===l&&(l=v(),null===l&&(l=g())),l}function A(){var l,t,s;if(s=u(L),/^[a-z0-9_\-]/i.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[a-z0-9_\\-]i")),null!==t)for(l=[];null!==t;)l.push(t),/^[a-z0-9_\-]/i.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[a-z0-9_\\-]i"));else l=null;return null!==l&&(l=function(l,n,t,u){return["Tag",u.join("")]}(s.offset,s.line,s.column,l)),null===l&&(L=u(s)),l}function d(){var l,t,s,o,f;if(o=u(L),f=u(L),/^[#.]/.test(n.charAt(L.offset))?(l=n.charAt(L.offset),e(L,1)):(l=null,0===H&&r("[#.]")),null!==l){if(/^[a-z0-9\-_$]/i.test(n.charAt(L.offset))?(s=n.charAt(L.offset),e(L,1)):(s=null,0===H&&r("[a-z0-9\\-_$]i")),null!==s)for(t=[];null!==s;)t.push(s),/^[a-z0-9\-_$]/i.test(n.charAt(L.offset))?(s=n.charAt(L.offset),e(L,1)):(s=null,0===H&&r("[a-z0-9\\-_$]i"));else t=null;null!==t?l=[l,t]:(l=null,L=u(f))}else l=null,L=u(f);return null!==l&&(l=function(l,n,t,u,e){return["#"===u?"Id":"Class",e.join("")]}(o.offset,o.line,o.column,l[0],l[1])),null===l&&(L=u(o)),l}function g(){var l,t,s,o,f,i,c;if(f=u(L),i=u(L),91===n.charCodeAt(L.offset)?(l="[",e(L,1)):(l=null,0===H&&r('"["')),null!==l){if(/^[^[\]=]/.test(n.charAt(L.offset))?(s=n.charAt(L.offset),e(L,1)):(s=null,0===H&&r("[^[\\]=]")),null!==s)for(t=[];null!==s;)t.push(s),/^[^[\]=]/.test(n.charAt(L.offset))?(s=n.charAt(L.offset),e(L,1)):(s=null,0===H&&r("[^[\\]=]"));else t=null;null!==t?(c=u(L),61===n.charCodeAt(L.offset)?(s="=",e(L,1)):(s=null,0===H&&r('"="')),null!==s?(o=_(),null!==o?s=[s,o]:(s=null,L=u(c))):(s=null,L=u(c)),s=null!==s?s:"",null!==s?(93===n.charCodeAt(L.offset)?(o="]",e(L,1)):(o=null,0===H&&r('"]"')),null!==o?l=[l,t,s,o]:(l=null,L=u(i))):(l=null,L=u(i))):(l=null,L=u(i))}else l=null,L=u(i);return null!==l&&(l=function(l,n,t,u,e){return["Attr",[u.join(""),e.length?e[1]:null]]}(f.offset,f.line,f.column,l[1],l[2])),null===l&&(L=u(f)),l}function v(){var l,t,s,o,f,i,c;if(f=u(L),i=u(L),58===n.charCodeAt(L.offset)?(l=":",e(L,1)):(l=null,0===H&&r('":"')),null!==l)if(c=u(L),H++,t=N(),H--,null===t?t="":(t=null,L=u(c)),null!==t){if(/^[a-z0-9\-_$]/i.test(n.charAt(L.offset))?(o=n.charAt(L.offset),e(L,1)):(o=null,0===H&&r("[a-z0-9\\-_$]i")),null!==o)for(s=[];null!==o;)s.push(o),/^[a-z0-9\-_$]/i.test(n.charAt(L.offset))?(o=n.charAt(L.offset),e(L,1)):(o=null,0===H&&r("[a-z0-9\\-_$]i"));else s=null;null!==s?(o=T(),o=null!==o?o:"",null!==o?l=[l,t,s,o]:(l=null,L=u(i))):(l=null,L=u(i))}else l=null,L=u(i);else l=null,L=u(i);return null!==l&&(l=function(l,n,t,u,e){return["Pseudo",[u.join(""),e&&e.substr(1,e.length-2).replace(/[\s\r\n]+/g," ").replace(/^\s\s*|\s\s*$/g,"")]]}(f.offset,f.line,f.column,l[2],l[3])),null===l&&(L=u(f)),l}function _(){var l,t,s;if(s=u(L),l=N(),null!==l&&(l=function(l,n,t,u){return u}(s.offset,s.line,s.column,l)),null===l&&(L=u(s)),null===l){if(s=u(L),/^[^[\]]/.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[^[\\]]")),null!==t)for(l=[];null!==t;)l.push(t),/^[^[\]]/.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[^[\\]]"));else l=null;null!==l&&(l=function(l,n,t,u){return u.join("")}(s.offset,s.line,s.column,l)),null===l&&(L=u(s))}return l}function E(){var l,n;return n=u(L),l=N(),null!==l&&(l=function(l,n,t,u){return["Directive",["_fillText",u]]}(n.offset,n.line,n.column,l)),null===l&&(L=u(n)),l}function C(){var l,t,s,o,f,i,c,a,h;return a=u(L),h=u(L),l=y(),null!==l?(t=K(),null!==t?(58===n.charCodeAt(L.offset)?(s=":",e(L,1)):(s=null,0===H&&r('":"')),null!==s?(o=K(),null!==o?(f=z(),null!==f?(i=K(),null!==i?(59===n.charCodeAt(L.offset)?(c=";",e(L,1)):(c=null,0===H&&r('";"')),null!==c?l=[l,t,s,o,f,i,c]:(l=null,L=u(h))):(l=null,L=u(h))):(l=null,L=u(h))):(l=null,L=u(h))):(l=null,L=u(h))):(l=null,L=u(h))):(l=null,L=u(h)),null!==l&&(l=function(l,n,t,u,e){return["Attribute",[u,e]]}(a.offset,a.line,a.column,l[0],l[4])),null===l&&(L=u(a)),null===l&&(a=u(L),h=u(L),l=y(),null!==l?(t=K(),null!==t?(58===n.charCodeAt(L.offset)?(s=":",e(L,1)):(s=null,0===H&&r('":"')),null!==s?(o=K(),null!==o?(f=N(),null!==f?l=[l,t,s,o,f]:(l=null,L=u(h))):(l=null,L=u(h))):(l=null,L=u(h))):(l=null,L=u(h))):(l=null,L=u(h)),null!==l&&(l=function(l,n,t,u,e){return["Attribute",[u,e]]}(a.offset,a.line,a.column,l[0],l[4])),null===l&&(L=u(a)),null===l&&(a=u(L),h=u(L),l=y(),null!==l?(t=K(),null!==t?(58===n.charCodeAt(L.offset)?(s=":",e(L,1)):(s=null,0===H&&r('":"')),null!==s?(/^[ \t]/.test(n.charAt(L.offset))?(o=n.charAt(L.offset),e(L,1)):(o=null,0===H&&r("[ \\t]")),null!==o?(f=z(),null!==f?l=[l,t,s,o,f]:(l=null,L=u(h))):(l=null,L=u(h))):(l=null,L=u(h))):(l=null,L=u(h))):(l=null,L=u(h)),null!==l&&(l=function(l,n,t,u,e){return["Attribute",[u,e]]}(a.offset,a.line,a.column,l[0],l[4])),null===l&&(L=u(a)))),l}function y(){var l,t,s;if(H++,s=u(L),/^[A-Za-z0-9\-_]/.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[A-Za-z0-9\\-_]")),null!==t)for(l=[];null!==t;)l.push(t),/^[A-Za-z0-9\-_]/.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[A-Za-z0-9\\-_]"));else l=null;return null!==l&&(l=function(l,n,t,u){return u.join("")}(s.offset,s.line,s.column,l)),null===l&&(L=u(s)),null===l&&(l=N()),H--,0===H&&null===l&&r("AttributeName"),l}function b(){var l,t,s,o,f,i;return H++,f=u(L),i=u(L),l=x(),null!==l?(40===n.charCodeAt(L.offset)?(t="(",e(L,1)):(t=null,0===H&&r('"("')),null!==t?(s=S(),s=null!==s?s:"",null!==s?(41===n.charCodeAt(L.offset)?(o=")",e(L,1)):(o=null,0===H&&r('")"')),null!==o?l=[l,t,s,o]:(l=null,L=u(i))):(l=null,L=u(i))):(l=null,L=u(i))):(l=null,L=u(i)),null!==l&&(l=function(l,n,t,u,e){return["Directive",[u,e.length?e:null]]}(f.offset,f.line,f.column,l[0],l[2])),null===l&&(L=u(f)),null===l&&(f=u(L),i=u(L),l=x(),null!==l?(t=T(),null!==t?l=[l,t]:(l=null,L=u(i))):(l=null,L=u(i)),null!==l&&(l=function(l,n,t,u,e){return["Directive",[u,[e.substr(1,e.length-2).replace(/[\s\r\n]+/g," ").replace(/^\s\s*|\s\s*$/g,"")]]]}(f.offset,f.line,f.column,l[0],l[1])),null===l&&(L=u(f))),H--,0===H&&null===l&&r("Directive"),l}function x(){var l,t,s,o,f,i;if(H++,f=u(L),i=u(L),64===n.charCodeAt(L.offset)?(l="@",e(L,1)):(l=null,0===H&&r('"@"')),null!==l)if(/^[a-zA-Z_$]/.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[a-zA-Z_$]")),null!==t){for(s=[],/^[a-zA-Z0-9$_]/.test(n.charAt(L.offset))?(o=n.charAt(L.offset),e(L,1)):(o=null,0===H&&r("[a-zA-Z0-9$_]"));null!==o;)s.push(o),/^[a-zA-Z0-9$_]/.test(n.charAt(L.offset))?(o=n.charAt(L.offset),e(L,1)):(o=null,0===H&&r("[a-zA-Z0-9$_]"));null!==s?l=[l,t,s]:(l=null,L=u(i))}else l=null,L=u(i);else l=null,L=u(i);return null!==l&&(l=function(l,n,t,u,e){return u+e.join("")}(f.offset,f.line,f.column,l[1],l[2])),null===l&&(L=u(f)),H--,0===H&&null===l&&r("DirectiveName"),l}function T(){var l,t,s,o,f;if(o=u(L),f=u(L),40===n.charCodeAt(L.offset)?(l="(",e(L,1)):(l=null,0===H&&r('"("')),null!==l){for(t=[],s=T(),null===s&&(s=I());null!==s;)t.push(s),s=T(),null===s&&(s=I());null!==t?(41===n.charCodeAt(L.offset)?(s=")",e(L,1)):(s=null,0===H&&r('")"')),null!==s?l=[l,t,s]:(l=null,L=u(f))):(l=null,L=u(f))}else l=null,L=u(f);return null!==l&&(l=function(l,n,t,u){return"("+u.join("")+")"}(o.offset,o.line,o.column,l[1])),null===l&&(L=u(o)),l}function G(){var l,n,t;if(t=u(L),n=I(),null!==n)for(l=[];null!==n;)l.push(n),n=I();else l=null;return null!==l&&(l=function(l,n,t,u){return u.join("")}(t.offset,t.line,t.column,l)),null===l&&(L=u(t)),l}function I(){var l;return/^[^()]/.test(n.charAt(L.offset))?(l=n.charAt(L.offset),e(L,1)):(l=null,0===H&&r("[^()]")),l}function S(){var l,t,s,o,f,i,c,a;if(i=u(L),c=u(L),l=z(),null!==l){for(t=[],a=u(L),44===n.charCodeAt(L.offset)?(s=",",e(L,1)):(s=null,0===H&&r('","')),null!==s?(o=K(),null!==o?(f=z(),null!==f?s=[s,o,f]:(s=null,L=u(a))):(s=null,L=u(a))):(s=null,L=u(a));null!==s;)t.push(s),a=u(L),44===n.charCodeAt(L.offset)?(s=",",e(L,1)):(s=null,0===H&&r('","')),null!==s?(o=K(),null!==o?(f=z(),null!==f?s=[s,o,f]:(s=null,L=u(a))):(s=null,L=u(a))):(s=null,L=u(a));null!==t?l=[l,t]:(l=null,L=u(c))}else l=null,L=u(c);return null!==l&&(l=function(l,n,t,u,e){for(var r=[u],s=0;e.length>s;s++)r.push(e[s][2]);return r}(i.offset,i.line,i.column,l[0],l[1])),null===l&&(L=u(i)),l}function z(){var l,t,s,o;return l=N(),null===l&&(l=R(),null===l&&(l=w(),null===l&&(s=u(L),o=u(L),"true"===n.substr(L.offset,4)?(l="true",e(L,4)):(l=null,0===H&&r('"true"')),null!==l?(t=K(),null!==t?l=[l,t]:(l=null,L=u(o))):(l=null,L=u(o)),null!==l&&(l=function(){return!0}(s.offset,s.line,s.column)),null===l&&(L=u(s)),null===l&&(s=u(L),o=u(L),"false"===n.substr(L.offset,5)?(l="false",e(L,5)):(l=null,0===H&&r('"false"')),null!==l?(t=K(),null!==t?l=[l,t]:(l=null,L=u(o))):(l=null,L=u(o)),null!==l&&(l=function(){return!1}(s.offset,s.line,s.column)),null===l&&(L=u(s)))))),l}function N(){var l,t,s,o,f;if(H++,o=u(L),f=u(L),"%%__STRING_TOKEN___%%"===n.substr(L.offset,21)?(l="%%__STRING_TOKEN___%%",e(L,21)):(l=null,0===H&&r('"%%__STRING_TOKEN___%%"')),null!==l){if(/^[0-9]/.test(n.charAt(L.offset))?(s=n.charAt(L.offset),e(L,1)):(s=null,0===H&&r("[0-9]")),null!==s)for(t=[];null!==s;)t.push(s),/^[0-9]/.test(n.charAt(L.offset))?(s=n.charAt(L.offset),e(L,1)):(s=null,0===H&&r("[0-9]"));else t=null;null!==t?l=[l,t]:(l=null,L=u(f))}else l=null,L=u(f);return null!==l&&(l=function(l,n,t,u){return V[u.join("")]}(o.offset,o.line,o.column,l[1])),null===l&&(L=u(o)),H--,0===H&&null===l&&r("String"),l}function R(){var l,t,s;if(H++,s=u(L),/^[a-zA-Z0-9$@#]/.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[a-zA-Z0-9$@#]")),null!==t)for(l=[];null!==t;)l.push(t),/^[a-zA-Z0-9$@#]/.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[a-zA-Z0-9$@#]"));else l=null;return null!==l&&(l=function(l,n,t,u){return u.join("")}(s.offset,s.line,s.column,l)),null===l&&(L=u(s)),H--,0===H&&null===l&&r("SimpleString"),l}function w(){var l,n,t,e,s,o;return H++,s=u(L),o=u(L),l=j(),null!==l?(n=O(),null!==n?(t=$(),null!==t?(e=K(),null!==e?l=[l,n,t,e]:(l=null,L=u(o))):(l=null,L=u(o))):(l=null,L=u(o))):(l=null,L=u(o)),null!==l&&(l=function(l,n,t,u,e,r){return parseFloat(u+e+r)}(s.offset,s.line,s.column,l[0],l[1],l[2])),null===l&&(L=u(s)),null===l&&(s=u(L),o=u(L),l=j(),null!==l?(n=O(),null!==n?(t=K(),null!==t?l=[l,n,t]:(l=null,L=u(o))):(l=null,L=u(o))):(l=null,L=u(o)),null!==l&&(l=function(l,n,t,u,e){return parseFloat(u+e)}(s.offset,s.line,s.column,l[0],l[1])),null===l&&(L=u(s)),null===l&&(s=u(L),o=u(L),l=j(),null!==l?(n=$(),null!==n?(t=K(),null!==t?l=[l,n,t]:(l=null,L=u(o))):(l=null,L=u(o))):(l=null,L=u(o)),null!==l&&(l=function(l,n,t,u,e){return parseFloat(u+e)}(s.offset,s.line,s.column,l[0],l[1])),null===l&&(L=u(s)),null===l&&(s=u(L),o=u(L),l=j(),null!==l?(n=K(),null!==n?l=[l,n]:(l=null,L=u(o))):(l=null,L=u(o)),null!==l&&(l=function(l,n,t,u){return parseFloat(u)}(s.offset,s.line,s.column,l[0])),null===l&&(L=u(s))))),H--,0===H&&null===l&&r("number"),l}function j(){var l,t,s,o,f;return o=u(L),f=u(L),l=D(),null!==l?(t=k(),null!==t?l=[l,t]:(l=null,L=u(f))):(l=null,L=u(f)),null!==l&&(l=function(l,n,t,u,e){return u+e}(o.offset,o.line,o.column,l[0],l[1])),null===l&&(L=u(o)),null===l&&(l=Z(),null===l&&(o=u(L),f=u(L),45===n.charCodeAt(L.offset)?(l="-",e(L,1)):(l=null,0===H&&r('"-"')),null!==l?(t=D(),null!==t?(s=k(),null!==s?l=[l,t,s]:(l=null,L=u(f))):(l=null,L=u(f))):(l=null,L=u(f)),null!==l&&(l=function(l,n,t,u,e){return"-"+u+e}(o.offset,o.line,o.column,l[1],l[2])),null===l&&(L=u(o)),null===l&&(o=u(L),f=u(L),45===n.charCodeAt(L.offset)?(l="-",e(L,1)):(l=null,0===H&&r('"-"')),null!==l?(t=Z(),null!==t?l=[l,t]:(l=null,L=u(f))):(l=null,L=u(f)),null!==l&&(l=function(l,n,t,u){return"-"+u}(o.offset,o.line,o.column,l[1])),null===l&&(L=u(o))))),l}function O(){var l,t,s,o;return s=u(L),o=u(L),46===n.charCodeAt(L.offset)?(l=".",e(L,1)):(l=null,0===H&&r('"."')),null!==l?(t=k(),null!==t?l=[l,t]:(l=null,L=u(o))):(l=null,L=u(o)),null!==l&&(l=function(l,n,t,u){return"."+u}(s.offset,s.line,s.column,l[1])),null===l&&(L=u(s)),l}function $(){var l,n,t,e;return t=u(L),e=u(L),l=P(),null!==l?(n=k(),null!==n?l=[l,n]:(l=null,L=u(e))):(l=null,L=u(e)),null!==l&&(l=function(l,n,t,u,e){return u+e}(t.offset,t.line,t.column,l[0],l[1])),null===l&&(L=u(t)),l}function k(){var l,n,t;if(t=u(L),n=Z(),null!==n)for(l=[];null!==n;)l.push(n),n=Z();else l=null;return null!==l&&(l=function(l,n,t,u){return u.join("")}(t.offset,t.line,t.column,l)),null===l&&(L=u(t)),l}function P(){var l,t,s,o;return s=u(L),o=u(L),/^[eE]/.test(n.charAt(L.offset))?(l=n.charAt(L.offset),e(L,1)):(l=null,0===H&&r("[eE]")),null!==l?(/^[+\-]/.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[+\\-]")),t=null!==t?t:"",null!==t?l=[l,t]:(l=null,L=u(o))):(l=null,L=u(o)),null!==l&&(l=function(l,n,t,u,e){return u+e}(s.offset,s.line,s.column,l[0],l[1])),null===l&&(L=u(s)),l}function Z(){var l;return/^[0-9]/.test(n.charAt(L.offset))?(l=n.charAt(L.offset),e(L,1)):(l=null,0===H&&r("[0-9]")),l}function D(){var l;return/^[1-9]/.test(n.charAt(L.offset))?(l=n.charAt(L.offset),e(L,1)):(l=null,0===H&&r("[1-9]")),l}function F(){var l;return/^[0-9a-fA-F]/.test(n.charAt(L.offset))?(l=n.charAt(L.offset),e(L,1)):(l=null,0===H&&r("[0-9a-fA-F]")),l}function K(){var l,t;for(H++,l=[],/^[ \t\n\r]/.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[ \\t\\n\\r]"));null!==t;)l.push(t),/^[ \t\n\r]/.test(n.charAt(L.offset))?(t=n.charAt(L.offset),e(L,1)):(t=null,0===H&&r("[ \\t\\n\\r]"));return H--,0===H&&null===l&&r("whitespace"),l}function M(l){l.sort();for(var n=null,t=[],u=0;l.length>u;u++)l[u]!==n&&(t.push(l[u]),n=l[u]);return t}var B={MSeries:s,CSeries:o,LSeries:f,ExcGroupRHS:i,Declaration:c,Single:a,Element:h,singleSelector:p,selectorRepeatableComponent:m,selectorTag:A,selectorIdClass:d,selectorAttr:g,selectorPseudo:v,selectorAttrValue:_,Text:E,Attribute:C,attributeName:y,Directive:b,directiveName:x,braced:T,nonBraceCharacters:G,nonBraceCharacter:I,arrayElements:S,value:z,string:N,simpleString:R,number:w,"int":j,frac:O,exp:$,digits:k,e:P,digit:Z,digit19:D,hexDigit:F,_:K};if(void 0!==t){if(void 0===B[t])throw Error("Invalid rule name: "+l(t)+".")}else t="MSeries";var L={offset:0,line:1,column:1,seenCR:!1},H=0,q={offset:0,line:1,column:1,seenCR:!1},U=[];({}).toString;var V=[];n=n.replace(/(["'])((?:\\\1|[^\1])*?)\1/g,function(l,n,t){return"%%__STRING_TOKEN___%%"+(V.push(t.replace(/\\'/g,"'").replace(/\\"/g,'"'))-1)}),n=n.replace(/(^|\n)\s*\\([^\n\r]+)/g,function(l,n,t){return n+"%%__STRING_TOKEN___%%"+(V.push(t)-1)});var X=/\/\*\s*siml:curly=true\s*\*\//i.test(n);n=n.replace(/\/\*[\s\S]*?\*\//g,""),n=n.replace(/\/\/.+?(?=[\r\n])/g,""),function(){if(!X){n=n.replace(/^(?:\s*\n)+/g,"");var l,t=0,u=[],e=null,r=0,s=0;n=n.split(/[\r\n]+/);for(var o=0,f=n.length;f>o;++o){var i=n[o],c=i.match(/^\s*/)[0],a=(c.match(/\s/g)||[]).length,h=((n[o+1]||"").match(/^\s*/)[0].match(/\s/g)||[]).length;if(r+=(i.match(/\(/g)||[]).length-(i.match(/\)/g)||[]).length,s+=(i.match(/\{/g)||[]).length-(i.match(/\}/g)||[]).length,null==e&&(e=h-a),s||r||/^\s+$/.test(i))u.push(i);else if(/^\s*%%__STRING_TOKEN___%%/.test(i)||/^\s*[A-Za-z0-9-_#.]+\s*(?:>\s*[A-Za-z0-9-_#.]+)*/.test(i)){if(i=i.substring(c.length),l>a)for(var p=l-a;;){if(p-=e,0===t||0>p)break;t--,u[o-1]+="}"}/[{}]\s*$/.test(i)?u.push(i):(h>a?(t++,u.push(c+i+"{")):u.push(c+i),l=a)}else l=a,u.push(i)}n=u.join("\n"),n+=Array(t+1).join("}")}}();var J=B[t]();if(null===J||L.offset!==n.length){var Q=Math.max(L.offset,q.offset),W=n.length>Q?n.charAt(Q):null,Y=L.offset>q.offset?L:q;throw new this.SyntaxError(M(U),W,Q,Y.line,Y.column)}return J},toSource:function(){return this._source}};return n.SyntaxError=function(n,t,u,e,r){function s(n,t){var u,e;switch(n.length){case 0:u="end of input";break;case 1:u=n[0];break;default:u=n.slice(0,n.length-1).join(", ")+" or "+n[n.length-1]}return e=t?l(t):"end of input","Expected "+u+" but "+e+" found."}this.name="SyntaxError",this.expected=n,this.found=t,this.message=s(n,t),this.offset=u,this.line=e,this.column=r},n.SyntaxError.prototype=Error.prototype,n}()})();