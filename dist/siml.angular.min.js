/** SIML (c) 2013 James padolsey, http://github.com/padolsey/SIML **/
(function(){var l="undefined"!=typeof module&&module.exports?module.exports:window.siml={};(function(){"use strict";function n(l){return"[object Array]"==={}.toString.call(l)}function t(l){return(l+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")}function u(l){return(l+"").replace(/^\s\s*|\s\s*$/g,"")}function e(l,n){for(var t in l)n.hasOwnProperty(t)||(n[t]=l[t]);return n}function r(l,n){return function(t,u,e,r){this.parentElement=e,this.indentation=r,t=[].slice.call(t);var f=t[0],s=u[l][f]||n[f];if(s||(s=u[l]._default||n._default),!s)throw Error("No fallback for"+t.join(""));this.type=s.type,this.html=s.make.apply(this,t)}}function f(l,n,t,u){this.spec=l,this.config=n||{},this.parentElement=t||this,this.indentation=u||"",this.defaultIndentation=n.indent,this.tag=null,this.id=null,this.attrs=[],this.classes=[],this.pseudos=[],this.isSingular=!1,this.multiplier=1,this.isPretty=n.pretty,this.htmlOutput=[],this.htmlContent=[],this.htmlAttributes=[],this.selector=l[0],this.children=l[1]||[],this.make(),this.processChildren(),this.collectOutput(),this.html=this.htmlOutput.join("")}function s(l){this.config=e(this.defaultConfig,l)}var o="div",i="  ",a={input:1,img:1,meta:1,link:1,br:1,hr:1,source:1,area:1,base:1,col:1},c={_fillText:{type:"CONTENT",make:function(l,n){return t(n)}},_default:{type:"CONTENT",make:function(l){throw Error("Directive not resolvable: "+l)}}},h={_default:{type:"ATTR",make:function(l,n){return n?l+'="'+t(n)+'"':l}},text:{type:"CONTENT",make:function(l,n){return t(n)}}},p={_default:{type:"ATTR",make:function(l){return"input"===this.parentElement.tag?'type="'+l+'"':(console.warn("Unknown pseudo class used:",l),void 0)}}};f.prototype={make:function(){for(var l,n,t=this.selector,u=0,e=t.length;e>u;++u)switch(l=t[u][0],n=t[u][1],l){case"Tag":this.tag=n;break;case"Id":this.id=n;break;case"Attr":this.attrs.push(n);break;case"Class":this.classes.push(n);break;case"Pseudo":this.pseudos.push(n)}this.tag=this.config.toTag.call(this,this.tag||o),this.isSingular=this.tag in a,this.id&&this.htmlAttributes.push('id="'+this.id+'"'),this.classes.length&&this.htmlAttributes.push('class="'+this.classes.join(" ").replace(/(^| )\./g,"$1")+'"');for(var u=0,e=this.attrs.length;e>u;++u)this.processProperty("Attribute",this.attrs[u]);for(var u=0,e=this.pseudos.length;e>u;++u){var r=this.pseudos[u];isNaN(r[0])?this.processProperty("Pseudo",r):this.multiplier=r[0]}},collectOutput:function(){var l=this.indentation,n=this.isPretty,t=this.htmlOutput,u=this.htmlAttributes,e=this.htmlContent;if(t.push(l+"<"+this.tag),t.push(u.length?" "+u.join(" "):""),this.isSingular)return t.push("/>"),void 0;if(t.push(">"),e.length&&(n&&t.push("\n"),t.push(e.join(n?"\n":"")),n&&t.push("\n"+l)),t.push("</"+this.tag+">"),this.multiplier>1)for(var r=t.join(""),f=this.multiplier-1;f--;)t.push(n?"\n":""),t.push(r)},processChildren:function(){for(var l=this.children,n=0,t=l.length;t>n;++n){var u=l[n][0];"Element"===u?this.processElement.apply(this,l[n][1]):this.processProperty(u,l[n][1])}},processElement:function(l,n){this.htmlContent.push(new s.Element([l,n],this.config,this,this.indentation+this.defaultIndentation).html)},processProperty:function(l,n){var t=new s[l](n,this.config,this,this.indentation+this.defaultIndentation);if(t.html)switch(t.type){case"ATTR":this.htmlAttributes.push(t.html);break;case"CONTENT":this.htmlContent.push(this.indentation+this.defaultIndentation+t.html)}}},s.escapeHTML=t,s.trim=u,s.isArray=n,s.Element=f,s.Attribute=r("attributes",h),s.Directive=r("directives",c),s.Pseudo=r("pseudos",p),s.prototype={defaultConfig:{pretty:!0,curly:!1,indent:i,directives:{},attributes:{},pseudos:{},toTag:function(l){return l}},parse:function(n,t){if(t=e(this.config,t||{}),t.pretty||(t.indent=""),/^[\s\n\r]+$/.test(n))n=[];else{t.curly&&(n+="\n/*siml:curly=true*/");try{n=l.PARSER.parse(n)}catch(u){throw void 0!==u.line&&void 0!==u.column?new SyntaxError("SIML: Line "+u.line+", column "+u.column+": "+u.message):new SyntaxError("SIML: "+u.message)}}for(var r=[],f=0,o=n.length;o>f;++f){var i=n[f][0];r[f]=new s[i](n[f][1],t).html}return r.join(t.pretty?"\n":"")}},l.Parser=s,l.defaultParser=new s({pretty:!0,indent:i}),l.parse=function(n,t){return l.defaultParser.parse(n,t)}})(),function(){var n=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","data","datalist","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","menu","meta","meter","nav","nobr","noframes","noscript","object","ol","optgroup","option","output","p","param","plaintext","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],t={button:1,checkbox:1,color:1,date:1,datetime:1,"datetime-local":1,email:1,file:1,hidden:1,image:1,month:1,number:1,password:1,radio:1,range:1,reset:1,search:1,submit:1,tel:1,text:1,time:1,url:1,week:1},u={};n.forEach(function(l){if(u[l]=l,l.length>2){var n=l.replace(/[aeiou]+/g,"");n.length>1&&!u[n]&&(u[n]=l)}});var e={type:"CONTENT",make:function(){return"<!doctype html>"}};l.html5=new l.Parser({pretty:!0,indent:"	",toTag:function(l){return u[l]||l},directives:{doctype:e,dt:e},pseudos:{_default:{type:"ATTR",make:function(l){if("input"===this.parentElement.tag&&l in t)return'type="'+l+'"';throw Error("Unknown Pseduo: "+l)}}}}),l.html5.HTML_SHORT_MAP=u,l.html5.INPUT_TYPES=t}(),l.angular=new l.Parser({pretty:!0,toTag:l.html5.config.toTag,directives:{_default:{type:"ATTR",make:function(n,t){return n=n.replace(/([a-z])([A-Z])/g,function(l,n,t){return n+"-"+t.toLowerCase()}),n="$"===n.substring(0,1)?n.substring(1):"ng-"+n,n+'="'+l.Parser.escapeHTML(t)+'"'}}},pseudos:{_default:{type:"ATTR",make:function(n){return"input"===this.parentElement.tag&&n in l.html5.INPUT_TYPES?'type="'+n+'"':"ng-"+n.replace(/([a-z])([A-Z])/g,function(l,n,t){return n+"-"+t.toLowerCase()})}}}}),l.PARSER=function(){function l(l){return'"'+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var n={parse:function(n,t){function u(l){var n={};for(var t in l)n[t]=l[t];return n}function e(l,t){for(var u=l.offset+t,e=l.offset;u>e;e++){var r=n.charAt(e);"\n"===r?(l.seenCR||l.line++,l.column=1,l.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(l.line++,l.column=1,l.seenCR=!0):(l.column++,l.seenCR=!1)}l.offset+=t}function r(l){B.offset<U.offset||(B.offset>U.offset&&(U=u(B),V=[]),V.push(l))}function f(){var l,n;return n=u(B),l=s(),null!==l&&(l=function(l,n,t,u){return u}(n.offset,n.line,n.column,l)),null===l&&(B=u(n)),l}function s(){var l,t,f,s,o,a,c;for(a=u(B),l=[],c=u(B),t=D(),null!==t?(f=i(),null!==f?(s=D(),null!==s?(59===n.charCodeAt(B.offset)?(o=";",e(B,1)):(o=null,0===q&&r('";"')),o=null!==o?o:"",null!==o?t=[t,f,s,o]:(t=null,B=u(c))):(t=null,B=u(c))):(t=null,B=u(c))):(t=null,B=u(c));null!==t;)l.push(t),c=u(B),t=D(),null!==t?(f=i(),null!==f?(s=D(),null!==s?(59===n.charCodeAt(B.offset)?(o=";",e(B,1)):(o=null,0===q&&r('";"')),o=null!==o?o:"",null!==o?t=[t,f,s,o]:(t=null,B=u(c))):(t=null,B=u(c))):(t=null,B=u(c))):(t=null,B=u(c));return null!==l&&(l=function(l,n,t,u){for(var e=[],r=0;u.length>r;r++){var f=u[r][1][0],s=u[r][1][1];"Group"!==f?e.push([f,s]):e.push.apply(e,s)}return e}(a.offset,a.line,a.column,l)),null===l&&(B=u(a)),l}function o(){var l,t,f,s,o,a,c,h;if(c=u(B),h=u(B),t=i(),null!==t){for(f=[],/^[\t ]/.test(n.charAt(B.offset))?(s=n.charAt(B.offset),e(B,1)):(s=null,0===q&&r("[\\t ]"));null!==s;)f.push(s),/^[\t ]/.test(n.charAt(B.offset))?(s=n.charAt(B.offset),e(B,1)):(s=null,0===q&&r("[\\t ]"));if(null!==f)if(43===n.charCodeAt(B.offset)?(s="+",e(B,1)):(s=null,0===q&&r('"+"')),s=null!==s?s:"",null!==s){for(o=[],/^[\t ]/.test(n.charAt(B.offset))?(a=n.charAt(B.offset),e(B,1)):(a=null,0===q&&r("[\\t ]"));null!==a;)o.push(a),/^[\t ]/.test(n.charAt(B.offset))?(a=n.charAt(B.offset),e(B,1)):(a=null,0===q&&r("[\\t ]"));null!==o?t=[t,f,s,o]:(t=null,B=u(h))}else t=null,B=u(h);else t=null,B=u(h)}else t=null,B=u(h);if(null!==t)for(l=[];null!==t;)if(l.push(t),h=u(B),t=i(),null!==t){for(f=[],/^[\t ]/.test(n.charAt(B.offset))?(s=n.charAt(B.offset),e(B,1)):(s=null,0===q&&r("[\\t ]"));null!==s;)f.push(s),/^[\t ]/.test(n.charAt(B.offset))?(s=n.charAt(B.offset),e(B,1)):(s=null,0===q&&r("[\\t ]"));if(null!==f)if(43===n.charCodeAt(B.offset)?(s="+",e(B,1)):(s=null,0===q&&r('"+"')),s=null!==s?s:"",null!==s){for(o=[],/^[\t ]/.test(n.charAt(B.offset))?(a=n.charAt(B.offset),e(B,1)):(a=null,0===q&&r("[\\t ]"));null!==a;)o.push(a),/^[\t ]/.test(n.charAt(B.offset))?(a=n.charAt(B.offset),e(B,1)):(a=null,0===q&&r("[\\t ]"));null!==o?t=[t,f,s,o]:(t=null,B=u(h))}else t=null,B=u(h);else t=null,B=u(h)}else t=null,B=u(h);else l=null;return null!==l&&(l=function(l,n,t,u){for(var e=[],r=0;u.length>r;r++){var f=u[r][0][0],s=u[r][0][1];"Group"!==f?e.push([f,s]):e.push.apply(e,s)}return e}(c.offset,c.line,c.column,l)),null===l&&(B=u(c)),l}function i(){var l,t,f,s,o,i,c,h,p;return h=u(B),l=N(),null!==l&&(l=function(l,n,t,u){return["Directive",["_fillText",u]]}(h.offset,h.line,h.column,l)),null===l&&(B=u(h)),null===l&&(h=u(B),p=u(B),l=$(),null!==l?(t=D(),null!==t?(58===n.charCodeAt(B.offset)?(f=":",e(B,1)):(f=null,0===q&&r('":"')),null!==f?(s=D(),null!==s?(o=x(),null!==o?(i=D(),null!==i?(59===n.charCodeAt(B.offset)?(c=";",e(B,1)):(c=null,0===q&&r('";"')),null!==c?l=[l,t,f,s,o,i,c]:(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p)),null!==l&&(l=function(l,n,t,u,e){return["Attribute",[u,e]]}(h.offset,h.line,h.column,l[0],l[4])),null===l&&(B=u(h)),null===l&&(h=u(B),p=u(B),l=$(),null!==l?(t=D(),null!==t?(58===n.charCodeAt(B.offset)?(f=":",e(B,1)):(f=null,0===q&&r('":"')),null!==f?(s=D(),null!==s?(o=N(),null!==o?l=[l,t,f,s,o]:(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p)),null!==l&&(l=function(l,n,t,u,e){return["Attribute",[u,e]]}(h.offset,h.line,h.column,l[0],l[4])),null===l&&(B=u(h)),null===l&&(h=u(B),p=u(B),l=$(),null!==l?(t=D(),null!==t?(58===n.charCodeAt(B.offset)?(f=":",e(B,1)):(f=null,0===q&&r('":"')),null!==f?(/^[ \t]/.test(n.charAt(B.offset))?(s=n.charAt(B.offset),e(B,1)):(s=null,0===q&&r("[ \\t]")),null!==s?(o=x(),null!==o?l=[l,t,f,s,o]:(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p)),null!==l&&(l=function(l,n,t,u,e){return["Attribute",[u,e]]}(h.offset,h.line,h.column,l[0],l[4])),null===l&&(B=u(h)),null===l&&(h=u(B),l=y(),null!==l&&(l=function(l,n,t,u){return["Directive",u]}(h.offset,h.line,h.column,l)),null===l&&(B=u(h)),null===l&&(h=u(B),l=a(),null!==l&&(l=function(l,n,t,u){return"Element"===u[0]?u=[u]:"Group"===u[0]&&(u=u[1]),["Group",u]}(h.offset,h.line,h.column,l)),null===l&&(B=u(h)),null===l&&(h=u(B),p=u(B),l=$(),null!==l?(t=D(),null!==t?(58===n.charCodeAt(B.offset)?(f=":",e(B,1)):(f=null,0===q&&r('":"')),null!==f?(s=D(),null!==s?(o=x(),null!==o?l=[l,t,f,s,o]:(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p)),null!==l&&(l=function(l,n,t,u,e){return["Attribute",[u,e]]}(h.offset,h.line,h.column,l[0],l[4])),null===l&&(B=u(h)))))))),l}function a(){var l,t,f,s,o,p,m,d,g,v,C,_,y,b;if(q++,_=u(B),y=u(B),40===n.charCodeAt(B.offset)?(l="(",e(B,1)):(l=null,0===q&&r('"("')),null!==l)if(t=D(),null!==t)if(f=a(),null!==f){for(s=[],b=u(B),o=D(),null!==o?(44===n.charCodeAt(B.offset)?(p=",",e(B,1)):(p=null,0===q&&r('","')),null!==p?(m=D(),null!==m?(d=a(),null!==d?o=[o,p,m,d]:(o=null,B=u(b))):(o=null,B=u(b))):(o=null,B=u(b))):(o=null,B=u(b));null!==o;)s.push(o),b=u(B),o=D(),null!==o?(44===n.charCodeAt(B.offset)?(p=",",e(B,1)):(p=null,0===q&&r('","')),null!==p?(m=D(),null!==m?(d=a(),null!==d?o=[o,p,m,d]:(o=null,B=u(b))):(o=null,B=u(b))):(o=null,B=u(b))):(o=null,B=u(b));if(null!==s)if(o=D(),null!==o)if(41===n.charCodeAt(B.offset)?(p=")",e(B,1)):(p=null,0===q&&r('")"')),null!==p)if(m=D(),null!==m){for(d=[],g=A();null!==g;)d.push(g),g=A();null!==d?(g=h(),null===g&&(b=u(B),62===n.charCodeAt(B.offset)?(g=">",e(B,1)):(g=null,0===q&&r('">"')),g=null!==g?g:"",null!==g?(v=D(),null!==v?(C=i(),null!==C?g=[g,v,C]:(g=null,B=u(b))):(g=null,B=u(b))):(g=null,B=u(b))),g=null!==g?g:"",null!==g?l=[l,t,f,s,o,p,m,d,g]:(l=null,B=u(y))):(l=null,B=u(y))}else l=null,B=u(y);else l=null,B=u(y);else l=null,B=u(y);else l=null,B=u(y)}else l=null,B=u(y);else l=null,B=u(y);else l=null,B=u(y);return null!==l&&(l=function(l,n,t,u,e,r,f){function s(l){for(var n=[],t=l[1][1],u=0,e=t.length;e>u;++u){var r=t[u];"Element"===r[0]&&n.push(s(r)||r)}return n.length?n:null}var o=[];e.unshift([,,,u]);for(var i,a,c,h=[],p=0,A=e.length;A>p;++p){i=e[p][3],a="Group"===i[0]?i[1]:[i],c=a[0];for(var m,d=a.length;d--;)m=s(a[d]),h.push.apply(h,m||[a[d]]);o.push.apply(o,a)}f[2]&&"string"==typeof f[2][0]&&(f=f[2],f="Group"==f[0]?f[1]:[f]);for(var g=h.length;g--;)f=K(f),r.length&&h[g][1][0].push.apply(h[g][1][0],r),f.length&&h[g][1][1].push.apply(h[g][1][1],f);return["Group",o]}(_.offset,_.line,_.column,l[2],l[3],l[7],l[8])),null===l&&(B=u(_)),null===l&&(_=u(B),l=c(),null!==l&&(l=function(l,n,t,u){return["Element",u]}(_.offset,_.line,_.column,l)),null===l&&(B=u(_))),q--,0===q&&null===l&&r("GroupedElement"),l}function c(){var l,t,f,i,a,A,m,d,g,v,C,_,y;if(q++,v=u(B),C=u(B),l=p(),null!==l?(t=D(),null!==t?(f=h(),null!==f?l=[l,t,f]:(l=null,B=u(C))):(l=null,B=u(C))):(l=null,B=u(C)),null!==l&&(l=function(l,n,t,u,e){return[u,e]}(v.offset,v.line,v.column,l[0],l[2])),null===l&&(B=u(v)),null===l){if(v=u(B),C=u(B),_=u(B),t=p(),null!==t){for(f=[],/^[ \t]/.test(n.charAt(B.offset))?(i=n.charAt(B.offset),e(B,1)):(i=null,0===q&&r("[ \\t]"));null!==i;)f.push(i),/^[ \t]/.test(n.charAt(B.offset))?(i=n.charAt(B.offset),e(B,1)):(i=null,0===q&&r("[ \\t]"));if(null!==f)if(62===n.charCodeAt(B.offset)?(i=">",e(B,1)):(i=null,0===q&&r('">"')),i=null!==i?i:"",null!==i){for(a=[],/^[ \t]/.test(n.charAt(B.offset))?(A=n.charAt(B.offset),e(B,1)):(A=null,0===q&&r("[ \\t]"));null!==A;)a.push(A),/^[ \t]/.test(n.charAt(B.offset))?(A=n.charAt(B.offset),e(B,1)):(A=null,0===q&&r("[ \\t]"));null!==a?t=[t,f,i,a]:(t=null,B=u(_))}else t=null,B=u(_);else t=null,B=u(_)}else t=null,B=u(_);if(null!==t)for(l=[];null!==t;)if(l.push(t),_=u(B),t=p(),null!==t){for(f=[],/^[ \t]/.test(n.charAt(B.offset))?(i=n.charAt(B.offset),e(B,1)):(i=null,0===q&&r("[ \\t]"));null!==i;)f.push(i),/^[ \t]/.test(n.charAt(B.offset))?(i=n.charAt(B.offset),e(B,1)):(i=null,0===q&&r("[ \\t]"));if(null!==f)if(62===n.charCodeAt(B.offset)?(i=">",e(B,1)):(i=null,0===q&&r('">"')),i=null!==i?i:"",null!==i){for(a=[],/^[ \t]/.test(n.charAt(B.offset))?(A=n.charAt(B.offset),e(B,1)):(A=null,0===q&&r("[ \\t]"));null!==A;)a.push(A),/^[ \t]/.test(n.charAt(B.offset))?(A=n.charAt(B.offset),e(B,1)):(A=null,0===q&&r("[ \\t]"));null!==a?t=[t,f,i,a]:(t=null,B=u(_))}else t=null,B=u(_);else t=null,B=u(_)}else t=null,B=u(_);else l=null;if(null!==l?(t=D(),null!==t?(123===n.charCodeAt(B.offset)?(f="{",e(B,1)):(f=null,0===q&&r('"{"')),null!==f?(i=D(),null!==i?(a=s(),null!==a?(A=D(),null!==A?(125===n.charCodeAt(B.offset)?(m="}",e(B,1)):(m=null,0===q&&r('"}"')),null!==m?(_=u(B),q++,y=u(B),d=D(),null!==d?(43===n.charCodeAt(B.offset)?(g="+",e(B,1)):(g=null,0===q&&r('"+"')),null!==g?d=[d,g]:(d=null,B=u(y))):(d=null,B=u(y)),q--,null===d?d="":(d=null,B=u(_)),null!==d?l=[l,t,f,i,a,A,m,d]:(l=null,B=u(C))):(l=null,B=u(C))):(l=null,B=u(C))):(l=null,B=u(C))):(l=null,B=u(C))):(l=null,B=u(C))):(l=null,B=u(C))):(l=null,B=u(C)),null!==l&&(l=function(l,n,t,u,e){for(var r,f=r=[u.shift()[0],[]],s=0,o=u.length;o>s;++s)r[1].push(["Element",r=[u[s][0],[]]]);return r[1]=e,f}(v.offset,v.line,v.column,l[0],l[4])),null===l&&(B=u(v)),null===l){if(v=u(B),C=u(B),l=p(),null!==l){for(t=[],/^[\t >]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[\\t >]"));null!==f;)t.push(f),/^[\t >]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[\\t >]"));null!==t?(f=o(),null!==f?l=[l,t,f]:(l=null,B=u(C))):(l=null,B=u(C))}else l=null,B=u(C);if(null!==l&&(l=function(l,n,t,u,e){return[u,e]}(v.offset,v.line,v.column,l[0],l[2])),null===l&&(B=u(v)),null===l){if(v=u(B),C=u(B),l=p(),null!==l){for(t=[],/^[\t ]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[\\t ]"));null!==f;)t.push(f),/^[\t ]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[\\t ]"));if(null!==t)if(f=N(),null!==f){for(i=[],/^[\t ]/.test(n.charAt(B.offset))?(a=n.charAt(B.offset),e(B,1)):(a=null,0===q&&r("[\\t ]"));null!==a;)i.push(a),/^[\t ]/.test(n.charAt(B.offset))?(a=n.charAt(B.offset),e(B,1)):(a=null,0===q&&r("[\\t ]"));null!==i?(a=c(),null!==a?l=[l,t,f,i,a]:(l=null,B=u(C))):(l=null,B=u(C))}else l=null,B=u(C);else l=null,B=u(C)}else l=null,B=u(C);if(null!==l&&(l=function(l,n,t,u,e,r){var f=[["Attribute",["text",e]],["Element",r]];return[u,f]}(v.offset,v.line,v.column,l[0],l[2],l[4])),null===l&&(B=u(v)),null===l){if(v=u(B),C=u(B),l=p(),null!==l){for(t=[],/^[\t ]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[\\t ]"));null!==f;)t.push(f),/^[\t ]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[\\t ]"));null!==t?(f=N(),null!==f?l=[l,t,f]:(l=null,B=u(C))):(l=null,B=u(C))}else l=null,B=u(C);null!==l&&(l=function(l,n,t,u,e){return[u,[["Attribute",["text",e]]]]}(v.offset,v.line,v.column,l[0],l[2])),null===l&&(B=u(v)),null===l&&(v=u(B),l=p(),null!==l&&(l=function(l,n,t,u){return[u,[]]}(v.offset,v.line,v.column,l)),null===l&&(B=u(v)))}}}}return q--,0===q&&null===l&&r("Element"),l}function h(){var l,t,f,o,i,a,c,h,p;return h=u(B),p=u(B),123===n.charCodeAt(B.offset)?(l="{",e(B,1)):(l=null,0===q&&r('"{"')),null!==l?(t=D(),null!==t?(125===n.charCodeAt(B.offset)?(f="}",e(B,1)):(f=null,0===q&&r('"}"')),null!==f?l=[l,t,f]:(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p)),null!==l&&(l=function(){return[]}(h.offset,h.line,h.column)),null===l&&(B=u(h)),null===l&&(h=u(B),p=u(B),123===n.charCodeAt(B.offset)?(l="{",e(B,1)):(l=null,0===q&&r('"{"')),null!==l?(t=D(),null!==t?(f=s(),null!==f?(o=D(),null!==o?(125===n.charCodeAt(B.offset)?(i="}",e(B,1)):(i=null,0===q&&r('"}"')),null!==i?(a=D(),null!==a?(43===n.charCodeAt(B.offset)?(c="+",e(B,1)):(c=null,0===q&&r('"+"')),c=null!==c?c:"",null!==c?l=[l,t,f,o,i,a,c]:(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p)),null!==l&&(l=function(l,n,t,u){return u}(h.offset,h.line,h.column,l[2])),null===l&&(B=u(h)),null===l&&(h=u(B),p=u(B),l=N(),null!==l?(t=D(),null!==t?(123===n.charCodeAt(B.offset)?(f="{",e(B,1)):(f=null,0===q&&r('"{"')),null!==f?(o=D(),null!==o?(i=s(),null!==i?(a=D(),null!==a?(125===n.charCodeAt(B.offset)?(c="}",e(B,1)):(c=null,0===q&&r('"}"')),null!==c?l=[l,t,f,o,i,a,c]:(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p))):(l=null,B=u(p)),null!==l&&(l=function(l,n,t,u,e){return e.unshift(["Attribute",["text",u]]),e}(h.offset,h.line,h.column,l[0],l[4])),null===l&&(B=u(h)),null===l&&(h=u(B),43===n.charCodeAt(B.offset)?(l="+",e(B,1)):(l=null,0===q&&r('"+"')),null!==l&&(l=function(){return[]}(h.offset,h.line,h.column)),null===l&&(B=u(h))))),l}function p(){var l,n,t,e,r;if(e=u(B),r=u(B),l=m(),null!==l){for(n=[],t=A();null!==t;)n.push(t),t=A();null!==n?l=[l,n]:(l=null,B=u(r))}else l=null,B=u(r);if(null!==l&&(l=function(l,n,t,u){return u[1].unshift(u[0]),u[1]}(e.offset,e.line,e.column,l)),null===l&&(B=u(e)),null===l){if(e=u(B),n=A(),null!==n)for(l=[];null!==n;)l.push(n),n=A();else l=null;null!==l&&(l=function(l,n,t,u){return u}(e.offset,e.line,e.column,l)),null===l&&(B=u(e))}return l}function A(){var l;return l=d(),null===l&&(l=g(),null===l&&(l=C(),null===l&&(l=v()))),l}function m(){var l,t,f;if(f=u(B),/^[a-z0-9_\-]/i.test(n.charAt(B.offset))?(t=n.charAt(B.offset),e(B,1)):(t=null,0===q&&r("[a-z0-9_\\-]i")),null!==t)for(l=[];null!==t;)l.push(t),/^[a-z0-9_\-]/i.test(n.charAt(B.offset))?(t=n.charAt(B.offset),e(B,1)):(t=null,0===q&&r("[a-z0-9_\\-]i"));else l=null;return null!==l&&(l=function(l,n,t,u){return["Tag",u.join("")]}(f.offset,f.line,f.column,l)),null===l&&(B=u(f)),l}function d(){var l,t,f,s,o;if(s=u(B),o=u(B),35===n.charCodeAt(B.offset)?(l="#",e(B,1)):(l=null,0===q&&r('"#"')),null!==l){if(/^[a-z0-9\-_$]/i.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[a-z0-9\\-_$]i")),null!==f)for(t=[];null!==f;)t.push(f),/^[a-z0-9\-_$]/i.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[a-z0-9\\-_$]i"));else t=null;null!==t?l=[l,t]:(l=null,B=u(o))}else l=null,B=u(o);return null!==l&&(l=function(l,n,t,u){return["Id",u.join("")]}(s.offset,s.line,s.column,l[1])),null===l&&(B=u(s)),l}function g(){var l,t,f,s,o;if(s=u(B),o=u(B),46===n.charCodeAt(B.offset)?(l=".",e(B,1)):(l=null,0===q&&r('"."')),null!==l){if(/^[a-z0-9\-_$]/i.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[a-z0-9\\-_$]i")),null!==f)for(t=[];null!==f;)t.push(f),/^[a-z0-9\-_$]/i.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[a-z0-9\\-_$]i"));else t=null;null!==t?l=[l,t]:(l=null,B=u(o))}else l=null,B=u(o);return null!==l&&(l=function(l,n,t,u){return["Class",u.join("")]}(s.offset,s.line,s.column,l[1])),null===l&&(B=u(s)),l}function v(){var l,t,f,s,o,i,a;if(i=u(B),a=u(B),91===n.charCodeAt(B.offset)?(l="[",e(B,1)):(l=null,0===q&&r('"["')),null!==l){if(/^[^[\]=]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[^[\\]=]")),null!==f)for(t=[];null!==f;)t.push(f),/^[^[\]=]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[^[\\]=]"));else t=null;null!==t?(61===n.charCodeAt(B.offset)?(f="=",e(B,1)):(f=null,0===q&&r('"="')),null!==f?(s=_(),s=null!==s?s:"",null!==s?(93===n.charCodeAt(B.offset)?(o="]",e(B,1)):(o=null,0===q&&r('"]"')),null!==o?l=[l,t,f,s,o]:(l=null,B=u(a))):(l=null,B=u(a))):(l=null,B=u(a))):(l=null,B=u(a))}else l=null,B=u(a);if(null!==l&&(l=function(l,n,t,u,e){return["Attr",[u.join(""),e]]}(i.offset,i.line,i.column,l[1],l[3])),null===l&&(B=u(i)),null===l){if(i=u(B),a=u(B),91===n.charCodeAt(B.offset)?(l="[",e(B,1)):(l=null,0===q&&r('"["')),null!==l){if(/^[^[\]]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[^[\\]]")),null!==f)for(t=[];null!==f;)t.push(f),/^[^[\]]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[^[\\]]"));else t=null;null!==t?(93===n.charCodeAt(B.offset)?(f="]",e(B,1)):(f=null,0===q&&r('"]"')),null!==f?l=[l,t,f]:(l=null,B=u(a))):(l=null,B=u(a))}else l=null,B=u(a);null!==l&&(l=function(l,n,t,u){return["Attr",[u.join("")]]}(i.offset,i.line,i.column,l[1])),null===l&&(B=u(i))}return l}function C(){var l,t,f,s,o,i,a;if(o=u(B),i=u(B),58===n.charCodeAt(B.offset)?(l=":",e(B,1)):(l=null,0===q&&r('":"')),null!==l)if(a=u(B),q++,t=N(),q--,null===t?t="":(t=null,B=u(a)),null!==t){if(/^[a-z0-9\-_$]/i.test(n.charAt(B.offset))?(s=n.charAt(B.offset),e(B,1)):(s=null,0===q&&r("[a-z0-9\\-_$]i")),null!==s)for(f=[];null!==s;)f.push(s),/^[a-z0-9\-_$]/i.test(n.charAt(B.offset))?(s=n.charAt(B.offset),e(B,1)):(s=null,0===q&&r("[a-z0-9\\-_$]i"));else f=null;null!==f?(s=E(),s=null!==s?s:"",null!==s?l=[l,t,f,s]:(l=null,B=u(i))):(l=null,B=u(i))}else l=null,B=u(i);else l=null,B=u(i);return null!==l&&(l=function(l,n,t,u,e){return["Pseudo",[u.join(""),e&&e.substr(1,e.length-2).replace(/[\s\r\n]+/g," ").replace(/^\s\s*|\s\s*$/g,"")]]}(o.offset,o.line,o.column,l[2],l[3])),null===l&&(B=u(o)),l}function _(){var l,t,f;if(f=u(B),l=N(),null!==l&&(l=function(l,n,t,u){return u}(f.offset,f.line,f.column,l)),null===l&&(B=u(f)),null===l){if(f=u(B),/^[^[\]]/.test(n.charAt(B.offset))?(t=n.charAt(B.offset),e(B,1)):(t=null,0===q&&r("[^[\\]]")),null!==t)for(l=[];null!==t;)l.push(t),/^[^[\]]/.test(n.charAt(B.offset))?(t=n.charAt(B.offset),e(B,1)):(t=null,0===q&&r("[^[\\]]"));else l=null;null!==l&&(l=function(l,n,t,u){return u.join("")}(f.offset,f.line,f.column,l)),null===l&&(B=u(f))}return l}function y(){var l,t,f,s,o,i;return q++,o=u(B),i=u(B),l=b(),null!==l?(40===n.charCodeAt(B.offset)?(t="(",e(B,1)):(t=null,0===q&&r('"("')),null!==t?(41===n.charCodeAt(B.offset)?(f=")",e(B,1)):(f=null,0===q&&r('")"')),null!==f?l=[l,t,f]:(l=null,B=u(i))):(l=null,B=u(i))):(l=null,B=u(i)),null!==l&&(l=function(l,n,t,u){return[u]}(o.offset,o.line,o.column,l[0])),null===l&&(B=u(o)),null===l&&(o=u(B),i=u(B),l=b(),null!==l?(40===n.charCodeAt(B.offset)?(t="(",e(B,1)):(t=null,0===q&&r('"("')),null!==t?(f=S(),null!==f?(41===n.charCodeAt(B.offset)?(s=")",e(B,1)):(s=null,0===q&&r('")"')),null!==s?l=[l,t,f,s]:(l=null,B=u(i))):(l=null,B=u(i))):(l=null,B=u(i))):(l=null,B=u(i)),null!==l&&(l=function(l,n,t,u,e){return[u,e]}(o.offset,o.line,o.column,l[0],l[2])),null===l&&(B=u(o)),null===l&&(o=u(B),i=u(B),l=b(),null!==l?(t=E(),null!==t?l=[l,t]:(l=null,B=u(i))):(l=null,B=u(i)),null!==l&&(l=function(l,n,t,u,e){return[u,[e.substr(1,e.length-2).replace(/[\s\r\n]+/g," ").replace(/^\s\s*|\s\s*$/g,"")]]}(o.offset,o.line,o.column,l[0],l[1])),null===l&&(B=u(o)))),q--,0===q&&null===l&&r("Directive"),l}function b(){var l,t,f,s,o;if(q++,s=u(B),o=u(B),/^[a-zA-Z_$]/.test(n.charAt(B.offset))?(l=n.charAt(B.offset),e(B,1)):(l=null,0===q&&r("[a-zA-Z_$]")),null!==l){for(t=[],/^[a-zA-Z0-9$_]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[a-zA-Z0-9$_]"));null!==f;)t.push(f),/^[a-zA-Z0-9$_]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[a-zA-Z0-9$_]"));null!==t?l=[l,t]:(l=null,B=u(o))}else l=null,B=u(o);return null!==l&&(l=function(l,n,t,u,e){return u+e.join("")}(s.offset,s.line,s.column,l[0],l[1])),null===l&&(B=u(s)),q--,0===q&&null===l&&r("DirectiveName"),l}function E(){var l,t,f,s,o;if(s=u(B),o=u(B),40===n.charCodeAt(B.offset)?(l="(",e(B,1)):(l=null,0===q&&r('"("')),null!==l){for(t=[],f=E(),null===f&&(f=z());null!==f;)t.push(f),f=E(),null===f&&(f=z());null!==t?(41===n.charCodeAt(B.offset)?(f=")",e(B,1)):(f=null,0===q&&r('")"')),null!==f?l=[l,t,f]:(l=null,B=u(o))):(l=null,B=u(o))}else l=null,B=u(o);return null!==l&&(l=function(l,n,t,u){return"("+u.join("")+")"}(s.offset,s.line,s.column,l[1])),null===l&&(B=u(s)),l}function T(){var l,n,t;if(t=u(B),n=z(),null!==n)for(l=[];null!==n;)l.push(n),n=z();else l=null;return null!==l&&(l=function(l,n,t,u){return u.join("")}(t.offset,t.line,t.column,l)),null===l&&(B=u(t)),l}function z(){var l;return/^[^()]/.test(n.charAt(B.offset))?(l=n.charAt(B.offset),e(B,1)):(l=null,0===q&&r("[^()]")),l}function $(){var l,t,f;if(q++,f=u(B),/^[A-Za-z0-9\-_]/.test(n.charAt(B.offset))?(t=n.charAt(B.offset),e(B,1)):(t=null,0===q&&r("[A-Za-z0-9\\-_]")),null!==t)for(l=[];null!==t;)l.push(t),/^[A-Za-z0-9\-_]/.test(n.charAt(B.offset))?(t=n.charAt(B.offset),e(B,1)):(t=null,0===q&&r("[A-Za-z0-9\\-_]"));else l=null;return null!==l&&(l=function(l,n,t,u){return u.join("")}(f.offset,f.line,f.column,l)),null===l&&(B=u(f)),null===l&&(l=N()),q--,0===q&&null===l&&r("AttributeName"),l}function S(){var l,t,f,s,o,i,a,c;if(i=u(B),a=u(B),l=x(),null!==l){for(t=[],c=u(B),44===n.charCodeAt(B.offset)?(f=",",e(B,1)):(f=null,0===q&&r('","')),null!==f?(s=D(),null!==s?(o=x(),null!==o?f=[f,s,o]:(f=null,B=u(c))):(f=null,B=u(c))):(f=null,B=u(c));null!==f;)t.push(f),c=u(B),44===n.charCodeAt(B.offset)?(f=",",e(B,1)):(f=null,0===q&&r('","')),null!==f?(s=D(),null!==s?(o=x(),null!==o?f=[f,s,o]:(f=null,B=u(c))):(f=null,B=u(c))):(f=null,B=u(c));null!==t?l=[l,t]:(l=null,B=u(a))}else l=null,B=u(a);return null!==l&&(l=function(l,n,t,u,e){for(var r=[u],f=0;e.length>f;f++)r.push(e[f][2]);return r}(i.offset,i.line,i.column,l[0],l[1])),null===l&&(B=u(i)),l}function x(){var l,t,f,s;return l=N(),null===l&&(l=j(),null===l&&(l=w(),null===l&&(f=u(B),s=u(B),"true"===n.substr(B.offset,4)?(l="true",e(B,4)):(l=null,0===q&&r('"true"')),null!==l?(t=D(),null!==t?l=[l,t]:(l=null,B=u(s))):(l=null,B=u(s)),null!==l&&(l=function(){return!0}(f.offset,f.line,f.column)),null===l&&(B=u(f)),null===l&&(f=u(B),s=u(B),"false"===n.substr(B.offset,5)?(l="false",e(B,5)):(l=null,0===q&&r('"false"')),null!==l?(t=D(),null!==t?l=[l,t]:(l=null,B=u(s))):(l=null,B=u(s)),null!==l&&(l=function(){return!1}(f.offset,f.line,f.column)),null===l&&(B=u(f)))))),l}function N(){var l,t,f,s,o;if(q++,s=u(B),o=u(B),"%%__STRING_TOKEN___%%"===n.substr(B.offset,21)?(l="%%__STRING_TOKEN___%%",e(B,21)):(l=null,0===q&&r('"%%__STRING_TOKEN___%%"')),null!==l){if(/^[0-9]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[0-9]")),null!==f)for(t=[];null!==f;)t.push(f),/^[0-9]/.test(n.charAt(B.offset))?(f=n.charAt(B.offset),e(B,1)):(f=null,0===q&&r("[0-9]"));else t=null;null!==t?l=[l,t]:(l=null,B=u(o))}else l=null,B=u(o);return null!==l&&(l=function(l,n,t,u){return J[u.join("")]}(s.offset,s.line,s.column,l[1])),null===l&&(B=u(s)),q--,0===q&&null===l&&r("String"),l}function j(){var l,t,f;if(q++,f=u(B),/^[a-zA-Z0-9$@#]/.test(n.charAt(B.offset))?(t=n.charAt(B.offset),e(B,1)):(t=null,0===q&&r("[a-zA-Z0-9$@#]")),null!==t)for(l=[];null!==t;)l.push(t),/^[a-zA-Z0-9$@#]/.test(n.charAt(B.offset))?(t=n.charAt(B.offset),e(B,1)):(t=null,0===q&&r("[a-zA-Z0-9$@#]"));else l=null;return null!==l&&(l=function(l,n,t,u){return u.join("")}(f.offset,f.line,f.column,l)),null===l&&(B=u(f)),q--,0===q&&null===l&&r("SimpleString"),l}function w(){var l,n,t,e,f,s;return q++,f=u(B),s=u(B),l=k(),null!==l?(n=R(),null!==n?(t=P(),null!==t?(e=D(),null!==e?l=[l,n,t,e]:(l=null,B=u(s))):(l=null,B=u(s))):(l=null,B=u(s))):(l=null,B=u(s)),null!==l&&(l=function(l,n,t,u,e,r){return parseFloat(u+e+r)}(f.offset,f.line,f.column,l[0],l[1],l[2])),null===l&&(B=u(f)),null===l&&(f=u(B),s=u(B),l=k(),null!==l?(n=R(),null!==n?(t=D(),null!==t?l=[l,n,t]:(l=null,B=u(s))):(l=null,B=u(s))):(l=null,B=u(s)),null!==l&&(l=function(l,n,t,u,e){return parseFloat(u+e)}(f.offset,f.line,f.column,l[0],l[1])),null===l&&(B=u(f)),null===l&&(f=u(B),s=u(B),l=k(),null!==l?(n=P(),null!==n?(t=D(),null!==t?l=[l,n,t]:(l=null,B=u(s))):(l=null,B=u(s))):(l=null,B=u(s)),null!==l&&(l=function(l,n,t,u,e){return parseFloat(u+e)}(f.offset,f.line,f.column,l[0],l[1])),null===l&&(B=u(f)),null===l&&(f=u(B),s=u(B),l=k(),null!==l?(n=D(),null!==n?l=[l,n]:(l=null,B=u(s))):(l=null,B=u(s)),null!==l&&(l=function(l,n,t,u){return parseFloat(u)}(f.offset,f.line,f.column,l[0])),null===l&&(B=u(f))))),q--,0===q&&null===l&&r("number"),l}function k(){var l,t,f,s,o;return s=u(B),o=u(B),l=G(),null!==l?(t=Z(),null!==t?l=[l,t]:(l=null,B=u(o))):(l=null,B=u(o)),null!==l&&(l=function(l,n,t,u,e){return u+e}(s.offset,s.line,s.column,l[0],l[1])),null===l&&(B=u(s)),null===l&&(l=O(),null===l&&(s=u(B),o=u(B),45===n.charCodeAt(B.offset)?(l="-",e(B,1)):(l=null,0===q&&r('"-"')),null!==l?(t=G(),null!==t?(f=Z(),null!==f?l=[l,t,f]:(l=null,B=u(o))):(l=null,B=u(o))):(l=null,B=u(o)),null!==l&&(l=function(l,n,t,u,e){return"-"+u+e}(s.offset,s.line,s.column,l[1],l[2])),null===l&&(B=u(s)),null===l&&(s=u(B),o=u(B),45===n.charCodeAt(B.offset)?(l="-",e(B,1)):(l=null,0===q&&r('"-"')),null!==l?(t=O(),null!==t?l=[l,t]:(l=null,B=u(o))):(l=null,B=u(o)),null!==l&&(l=function(l,n,t,u){return"-"+u}(s.offset,s.line,s.column,l[1])),null===l&&(B=u(s))))),l}function R(){var l,t,f,s;return f=u(B),s=u(B),46===n.charCodeAt(B.offset)?(l=".",e(B,1)):(l=null,0===q&&r('"."')),null!==l?(t=Z(),null!==t?l=[l,t]:(l=null,B=u(s))):(l=null,B=u(s)),null!==l&&(l=function(l,n,t,u){return"."+u}(f.offset,f.line,f.column,l[1])),null===l&&(B=u(f)),l}function P(){var l,n,t,e;return t=u(B),e=u(B),l=I(),null!==l?(n=Z(),null!==n?l=[l,n]:(l=null,B=u(e))):(l=null,B=u(e)),null!==l&&(l=function(l,n,t,u,e){return u+e
}(t.offset,t.line,t.column,l[0],l[1])),null===l&&(B=u(t)),l}function Z(){var l,n,t;if(t=u(B),n=O(),null!==n)for(l=[];null!==n;)l.push(n),n=O();else l=null;return null!==l&&(l=function(l,n,t,u){return u.join("")}(t.offset,t.line,t.column,l)),null===l&&(B=u(t)),l}function I(){var l,t,f,s;return f=u(B),s=u(B),/^[eE]/.test(n.charAt(B.offset))?(l=n.charAt(B.offset),e(B,1)):(l=null,0===q&&r("[eE]")),null!==l?(/^[+\-]/.test(n.charAt(B.offset))?(t=n.charAt(B.offset),e(B,1)):(t=null,0===q&&r("[+\\-]")),t=null!==t?t:"",null!==t?l=[l,t]:(l=null,B=u(s))):(l=null,B=u(s)),null!==l&&(l=function(l,n,t,u,e){return u+e}(f.offset,f.line,f.column,l[0],l[1])),null===l&&(B=u(f)),l}function O(){var l;return/^[0-9]/.test(n.charAt(B.offset))?(l=n.charAt(B.offset),e(B,1)):(l=null,0===q&&r("[0-9]")),l}function G(){var l;return/^[1-9]/.test(n.charAt(B.offset))?(l=n.charAt(B.offset),e(B,1)):(l=null,0===q&&r("[1-9]")),l}function F(){var l;return/^[0-9a-fA-F]/.test(n.charAt(B.offset))?(l=n.charAt(B.offset),e(B,1)):(l=null,0===q&&r("[0-9a-fA-F]")),l}function D(){var l,n;for(q++,l=[],n=L();null!==n;)l.push(n),n=L();return q--,0===q&&null===l&&r("whitespace"),l}function L(){var l;return/^[ \t\n\r]/.test(n.charAt(B.offset))?(l=n.charAt(B.offset),e(B,1)):(l=null,0===q&&r("[ \\t\\n\\r]")),l}function M(l){l.sort();for(var n=null,t=[],u=0;l.length>u;u++)l[u]!==n&&(t.push(l[u]),n=l[u]);return t}function K(l){for(var n=[],t=0,u=l.length;u>t;++t)n[t]="[object Array]"===Y.call(l[t])?K(l[t]):l[t];return n}var H={start:f,children:s,singleLineChildren:o,child:i,groupedElement:a,element:c,elementRHSChildren:h,singleSelector:p,selectorRepeatableComponent:A,selectorTag:m,selectorId:d,selectorClass:g,selectorAttr:v,selectorPseudo:C,selectorAttrValue:_,directive:y,directiveName:b,braced:E,nonBraceCharacters:T,nonBraceCharacter:z,attributeName:$,arrayElements:S,value:x,string:N,simpleString:j,number:w,"int":k,frac:R,exp:P,digits:Z,e:I,digit:O,digit19:G,hexDigit:F,_:D,whitespace:L};if(void 0!==t){if(void 0===H[t])throw Error("Invalid rule name: "+l(t)+".")}else t="start";var B={offset:0,line:1,column:1,seenCR:!1},q=0,U={offset:0,line:1,column:1,seenCR:!1},V=[],Y={}.toString,J=[];n=n.replace(/(["'])((?:\\\1|[^\1])*?)\1/g,function(l,n,t){return"%%__STRING_TOKEN___%%"+(J.push(t.replace(/\\'/g,"'").replace(/\\"/g,'"'))-1)}),n=n.replace(/(^|\n)\s*\\([^\n\r]+)/g,function(l,n,t){return n+"%%__STRING_TOKEN___%%"+(J.push(t)-1)});var Q=/\/\*\s*siml:curly=true\s*\*\//i.test(n);n=n.replace(/\/\*[\s\S]*?\*\//g,""),n=n.replace(/\/\/.+?(?=[\r\n])/g,""),function(){if(!Q){n=n.replace(/^(?:\s*\n)+/g,"");var l,t=0,u=[],e=null;n=n.split(/[\r\n]+/);for(var r=0,f=n.length;f>r;++r){var s=n[r],o=s.match(/^\s*/)[0],i=(o.match(/\s/g)||[]).length,a=((n[r+1]||"").match(/^\s*/)[0].match(/\s/g)||[]).length;if(null==e&&(e=a-i),/^\s+$/.test(s))u.push(s);else if(/^\s*[A-Za-z0-9-_#.]+\s*(?:>\s*[A-Za-z0-9-_#.]+)*/.test(s))if(/[{}]\s*$/.test(s))u.push(s);else{if(s=s.substring(o.length),l>i)for(var c=l-i;;){if(c-=e,0===t||0>c)break;t--,u[r-1]+="}"}a>i?(t++,u.push(o+s+"{")):u.push(o+s),l=i}else l=i,u.push(s)}n=u.join("\n"),n+=Array(t+1).join("}")}}();var W=H[t]();if(null===W||B.offset!==n.length){var X=Math.max(B.offset,U.offset),ln=n.length>X?n.charAt(X):null,nn=B.offset>U.offset?B:U;throw new this.SyntaxError(M(V),ln,X,nn.line,nn.column)}return W},toSource:function(){return this._source}};return n.SyntaxError=function(n,t,u,e,r){function f(n,t){var u,e;switch(n.length){case 0:u="end of input";break;case 1:u=n[0];break;default:u=n.slice(0,n.length-1).join(", ")+" or "+n[n.length-1]}return e=t?l(t):"end of input","Expected "+u+" but "+e+" found."}this.name="SyntaxError",this.expected=n,this.found=t,this.message=f(n,t),this.offset=u,this.line=e,this.column=r},n.SyntaxError.prototype=Error.prototype,n}()})();